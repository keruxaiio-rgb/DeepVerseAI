# üöÄ DeepVerse AI - Render Deployment Guide

## Prerequisites

- [Render Account](https://render.com) (Free tier available)
- [GitHub Repository](https://github.com) with your DeepVerse AI code
- PayMongo account with API keys
- Firebase project with Firestore enabled

## üìã Deployment Steps

### Step 1: Connect Repository to Render

1. **Go to Render Dashboard:** https://dashboard.render.com
2. **Click "New" ‚Üí "Blueprint"**
3. **Connect your GitHub repository:**
   - Click "Connect account" and authorize Render
   - Search for your DeepVerse AI repository
   - Select the repository

4. **Render will detect your `render.yaml` file automatically**

### Step 2: Environment Variables (Auto-configured)

**‚úÖ All environment variables are automatically configured** through the `render.yaml` file. No manual setup required!

The blueprint will automatically set up:

#### PayMongo Configuration
- `PAYMONGO_SECRET_KEY` - Live API key
- `PAYMONGO_WEBHOOK_SECRET` - Webhook signature key
- `NEXT_PUBLIC_PAYMONGO_PUBLIC_KEY` - Public key for frontend

#### Firebase Configuration
- All Firebase configuration variables for authentication and database
- Properly configured for production use

#### App Configuration
- Admin and user email settings
- OpenAI API key for AI functionality
- Production URLs and settings

#### System Variables
- `NODE_ENV = production`
- `PORT` - Auto-generated by Render
- `NEXT_PUBLIC_APP_URL` - Your Render domain

**The `.env.render` file is for reference only** - all values are embedded in the blueprint configuration.

### Step 3: Deploy

1. **Click "Create service from Blueprint"**
2. **Render will:**
   - Clone your repository
   - Install dependencies (`npm install`)
   - Build the application (`npm run build`)
   - Start the service (`npm start`)

3. **Wait for deployment to complete** (usually 5-10 minutes)

### Step 4: Configure PayMongo Webhook

1. **Get your Render domain:** It will be something like `deepverse-ai.onrender.com`

2. **Update PayMongo webhook URL:**
   - Go to PayMongo Dashboard ‚Üí Webhooks
   - Update webhook URL to: `https://deepverse-ai.onrender.com/api/payment/webhook`
   - Ensure these events are enabled:
     - `source.chargeable`
     - `payment.paid`
     - `payment.failed`
     - `payment.expired`

### Step 5: Test Deployment

Visit your Render domain and test:

1. **Homepage:** `https://deepverse-ai.onrender.com`
2. **Upgrade page:** `https://deepverse-ai.onrender.com/upgrade`
3. **QR Payment:** Try generating an invoice
4. **Webhook:** Check if payments process correctly

## üîß Render Configuration Details

### Service Settings
- **Service Type:** Web Service
- **Runtime:** Node.js
- **Build Command:** `npm install && npm run build`
- **Start Command:** `npm start`
- **Plan:** Starter (Free tier)

### Environment Variables
- **NODE_ENV:** Automatically set to `production`
- **NEXT_PUBLIC_APP_URL:** Automatically generated by Render
- **All other variables:** Manually configured as secrets

### Health Checks
- **Health Check Path:** `/`
- **Auto-deploy:** Enabled for `main` branch

## üêõ Troubleshooting

### Build Failures
```bash
# Check build logs in Render dashboard
# Common issues:
# - Missing environment variables
# - Node version compatibility
# - Build timeout (increase timeout in service settings)
```

### Runtime Errors
```bash
# Check service logs in Render dashboard
# Common issues:
# - Environment variables not set correctly
# - Firebase permissions
# - PayMongo API errors
```

### Payment Issues
```bash
# Verify PayMongo webhook URL
# Check webhook logs in PayMongo dashboard
# Ensure QR code is correct: code_pRQ6tBUFwMxHnGct8GbTuW2c
```

## üìä Monitoring

### Render Dashboard
- **Service Status:** Check if service is running
- **Build History:** Monitor deployment success
- **Logs:** View real-time application logs
- **Metrics:** Monitor CPU, memory, and response times

### PayMongo Dashboard
- **Webhook Logs:** Monitor payment notifications
- **Transaction History:** Verify payments are processing

### Firebase Console
- **Firestore:** Monitor database operations
- **Authentication:** Check user registrations

## üîÑ Updates & Maintenance

### Automatic Deployments
- Push changes to `main` branch
- Render automatically rebuilds and deploys
- Monitor deployment status in dashboard

### Manual Deployments
- Go to service dashboard
- Click "Manual Deploy"
- Select "Clear build cache" if needed

### Environment Updates
- Update environment variables in service settings
- Redeploy service to apply changes

## üí∞ Cost Optimization

### Free Tier Limits
- 750 hours/month free
- 100% uptime SLA
- Automatic SSL certificates
- Global CDN

### Scaling
- Upgrade to paid plans for:
  - More build hours
  - Higher performance
  - Additional services (databases, etc.)

## üéØ Success Checklist

- [ ] Repository connected to Render
- [ ] Environment variables configured
- [ ] Service deployed successfully
- [ ] Domain accessible
- [ ] QR payments working
- [ ] Webhooks processing payments
- [ ] Firebase database connected
- [ ] OpenAI API responding

## üìû Support

- **Render Documentation:** https://docs.render.com
- **PayMongo Support:** https://paymongo.com/docs
- **Firebase Support:** https://firebase.google.com/support

---

**üéâ Your DeepVerse AI is now live on Render!**

Your QR payment subscription system is ready for users. üöÄ
